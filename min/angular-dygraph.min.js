!function(){"use strict";angular.module("dygraph",[]).directive("dyGraph",function(e,i){var t=function(t,r,n){function o(){var e={},i=0;r.find("div.series").each(function(){var e=$(this).width();i=Math.max(i,e)}),r.find("div.series").each(function(){$(this).width(i)});var n=r.find("div.legend").outerHeight(!0);console.log("Heights",n,d.height(),d.outerHeight(!0),$(l).outerHeight(),r.height(),$(a).height(),$(a).outerHeight(!0)),t.ref.resize(d.width(),d.height()-n),console.log(d),e=$(s).offset(),e.bottom=e.top+d.height()-n,e.right=e.left+d.width(),console.log("Position",e)}t.height="300px";var l=r.children()[0],s=$(l).children()[0],a=$(l).children()[1],d=r.parent();t.LegendEnabled=!0,t.api={addGraph:function(){var e={};return e=null!==t.options?new Dygraph(s,t.data,t.options):new Dygraph(s,t.data)}},t.ref=t.api.addGraph(),o(),t.ref.resetZoom(),t.$watch("data",function(){0!==t.data&&t.ref.updateOptions({file:t.data})},!0),t.legendSeries={},t.$watch("legend",function(){var e=t.ref.getColors();t.ref.getLabels();if(void 0!==t.legend&&void 0!==t.legend.series){var i=0;for(var r in t.legend.series)t.legendSeries[r]={},t.legendSeries[r].color=e[i],t.legendSeries[r].label=t.legend.series[r].label,t.legendSeries[r].format=t.legend.series[r].format,t.legendSeries[r].visible=!0,t.legendSeries[r].column=i}},!0),angular.element(e).bind("resize",function(){o()}),t.seriesStyle=function(e){return e.visible?e.color:void 0},t.seriesLine=function(e){return i.trustAsHtml('<svg height="14" width="20"><line <x1="0" x2="16" y1="8" y2="8" stroke="'+e.color+'"stroke-width="3"/></svg>')},t.selectSeries=function(e){e.visible=!e.visible,t.ref.setVisibility(e.column,e.visible)}};return{restrict:"E",scope:{options:"=?",data:"=",legend:"=?"},templateUrl:"../html/dygraph-template.html",link:t}})}();