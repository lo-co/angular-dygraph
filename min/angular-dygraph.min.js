!function(){"use strict";angular.module("dygraph",[]).directive("dyGraph",function(e,i){var n=function(n,r,t){function l(){var e=0;r.find("div.series").each(function(){var i=$(this).width();e=Math.max(e,i)}),r.find("div.series").each(function(){$(this).width(e)});var i=r.find("div.legend").outerHeight(!0);n.ref.resize(s.width(),s.height()-i)}n.height="300px";var d=r.children()[0],a=$(d).children()[0],s=($(d).children()[1],r.parent());n.LegendEnabled=!0,n.api={addGraph:function(){var e={};return e=null!==n.options?new Dygraph(a,n.data,n.options):new Dygraph(a,n.data)}},n.ref=n.api.addGraph(),l(),n.ref.resetZoom();var o=r.find("div.dygraph-legend");console.log(o),n.$watch("data",function(){0!==n.data&&n.ref.updateOptions({file:n.data})},!0),n.legendSeries={},n.$watch("legend",function(){var e=n.ref.getColors();n.ref.getLabels();if(void 0!==n.legend&&void 0!==n.legend.series){var i=0;for(var r in n.legend.series)n.legendSeries[r]={},n.legendSeries[r].color=e[i],n.legendSeries[r].label=n.legend.series[r].label,n.legendSeries[r].format=n.legend.series[r].format,n.legendSeries[r].visible=!0,n.legendSeries[r].column=i}},!0),angular.element(e).bind("resize",function(){l()}),n.seriesStyle=function(e){return e.visible?e.color:void 0},n.seriesLine=function(e){return i.trustAsHtml('<svg height="14" width="20"><line <x1="0" x2="16" y1="8" y2="8" stroke="'+e.color+'"stroke-width="3"/></svg>')},n.selectSeries=function(e){e.visible=!e.visible,n.ref.setVisibility(e.column,e.visible)}};return{restrict:"E",scope:{options:"=?",data:"=",legend:"=?"},templateUrl:"../html/dygraph-template.html",link:n}})}();